{% extends 'store/base.html' %} {% load static %} {% block title %}Checkout -
MultiShop{% endblock %} {% block content %}
<section class="py-5">
  <div class="container">
    <h2 class="fw-bold mb-4">
      <i class="fas fa-credit-card text-warning me-2"></i>Checkout
    </h2>

    <div class="row">
      <!-- Billing Form -->
      <div class="col-md-7">
        <div class="card border-0 shadow-sm rounded-4 p-4 mb-4">
          <h5 class="fw-bold mb-4">
            <i class="fas fa-map-marker-alt me-2 text-warning"></i>
            Billing Details
          </h5>

          <form method="POST">
            {% csrf_token %}

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label fw-semibold"> First Name </label>
                <input
                  type="text"
                  name="first_name"
                  class="form-control rounded-3"
                  placeholder="First name"
                  required
                />
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label fw-semibold"> Last Name </label>
                <input
                  type="text"
                  name="last_name"
                  class="form-control rounded-3"
                  placeholder="Last name"
                  required
                />
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label fw-semibold"> Email </label>
              <input
                type="email"
                name="email"
                class="form-control rounded-3"
                value="{{ request.user.email }}"
                required
              />
            </div>

            <div class="mb-3">
              <label class="form-label fw-semibold"> Phone </label>
              <input
                type="text"
                name="phone"
                class="form-control rounded-3"
                placeholder="Phone number"
                required
              />
            </div>

            <div class="mb-3">
              <label class="form-label fw-semibold"> Address </label>
              <input
                type="text"
                name="address"
                class="form-control rounded-3"
                placeholder="Street address"
                required
              />
            </div>

            <div class="row">
              <div class="col-md-4 mb-3">
                <label class="form-label fw-semibold"> City </label>
                <input
                  type="text"
                  name="city"
                  class="form-control rounded-3"
                  placeholder="City"
                  required
                />
              </div>
              <div class="col-md-4 mb-3">
                <label class="form-label fw-semibold"> State </label>
                <input
                  type="text"
                  name="state"
                  class="form-control rounded-3"
                  placeholder="State"
                  required
                />
              </div>
              <div class="col-md-4 mb-3">
                <label class="form-label fw-semibold"> PIN Code </label>
                <input
                  type="text"
                  name="pin_code"
                  class="form-control rounded-3"
                  placeholder="PIN"
                  required
                />
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label fw-semibold">
                Order Notes (Optional)
              </label>
              <textarea
                name="notes"
                class="form-control rounded-3"
                rows="3"
                placeholder="Any special instructions..."
              >
              </textarea>
            </div>

            <button
              type="submit"
              class="btn btn-warning btn-lg w-100 fw-bold rounded-3"
            >
              <i class="fas fa-check-circle me-2"></i>
              Place Order
            </button>
          </form>
        </div>
      </div>

      <!-- Order Summary -->
      <div class="col-md-5">
        <div class="card border-0 shadow-sm rounded-4 p-4">
          <h5 class="fw-bold mb-4">
            <i class="fas fa-shopping-bag me-2 text-warning"></i>
            Your Order
          </h5>

          {% for item in cart_items %}
          <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="d-flex align-items-center">
              <img
                src="{{ item.product.image.url }}"
                class="rounded-2 me-3"
                style="width: 50px; height: 50px; object-fit: cover"
                alt="{{ item.product.name }}"
              />
              <div>
                <small class="fw-bold"> {{ item.product.name }} </small>
                <br />
                <small class="text-muted"> x{{ item.quantity }} </small>
              </div>
            </div>
            <span class="fw-bold text-danger"> ₹{{ item.get_total }} </span>
          </div>
          {% endfor %}

          <hr />

          <div class="d-flex justify-content-between mb-2">
            <span class="text-muted">Subtotal</span>
            <span>₹{{ subtotal }}</span>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span class="text-muted">Shipping</span>
            <span class="text-success">
              {% if subtotal >= 500 %}Free{% else %}₹50{% endif %}
            </span>
          </div>

          <hr />

          <div class="d-flex justify-content-between">
            <span class="fw-bold fs-5">Total</span>
            <span class="fw-bold fs-5 text-danger"> ₹{{ total }} </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
